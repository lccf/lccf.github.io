---
title: 关于截图的一点总结
date: 2013-06-25 19:13
tags:
- webmonitor
- aau
- 截图程序
categories: 积累点滴
---

1.去除滚动条
aau创建webform可以去掉滚动条，但测试的时候发现如果网页中对html设置了overflow-y:scroll;滚动条还是会显示出来，页面的doctype好象也可以影响滚动条的显示。最终使用代码将所以滚动条显示出来，在截图的时候裁掉滚动条。
计算滚动条代码：

aau代码

```js
var js = /**
    document.documentElement.style.overflowY='scroll';
**/
wb.doScript(js);
 
var scrollWidth = wb.document.documentElement.offsetWidth  - wb.body.clientWidth;
```

2.触发layzload加载的图片
很多网站对图片使用了懒加载，图片显示不全，强制设置滚动条到底部可以解决大部份情况。
js添加一行
window.scrollTo(0, 100000);

3.多用win.delay
最开始在使用setPos修改webform的宽度之后，因为我设置的宽度大于body的宽度截图出现头部居中主体内容未居中的情况，尝试在调用setPos以后调用win.delay(20)问题就解决了。在设置scroll的值触发图片懒加载以后也需要暂停一下让图片加载完成，不过要根据实际网页的情况去设置。
